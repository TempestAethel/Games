<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic-Tac-Toe</title>
    <style>
        .box {
    backdrop-filter: blur(16px) saturate(180%);
    font-family: 'Balsamiq Sans', cursive;
    line-height: 0.9;
    font-size: 60px;
}

.text-wrapper {
    animation: appear .2s cubic-bezier(0.8, 1.9, 0.2, 2.2);
}

@keyframes appear {
    from {
        transform: scale(0.2)
    }

    to {
        transform: scale(1)
    }
}

.x-color {
    color: #28a745;
}

.o-color {
    color: #dc3545;
}

@import url('https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,300;0,400;1,100;1,300;1,400&display=swap');

.navbar {
    box-shadow: 0 2px 4px rgb(0 0 0 / 8%), 0 8px 12px rgb(0 0 0 / 4%);
}

html,
body {
    height: 100%
}

body {
    background-color: #ffffff;
    background-image: url("data:image/svg+xml,%3Csvg width='64' height='64' viewBox='0 0 64 64' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8 16c4.418 0 8-3.582 8-8s-3.582-8-8-8-8 3.582-8 8 3.582 8 8 8zm0-2c3.314 0 6-2.686 6-6s-2.686-6-6-6-6 2.686-6 6 2.686 6 6 6zm33.414-6l5.95-5.95L45.95.636 40 6.586 34.05.636 32.636 2.05 38.586 8l-5.95 5.95 1.414 1.414L40 9.414l5.95 5.95 1.414-1.414L41.414 8zM40 48c4.418 0 8-3.582 8-8s-3.582-8-8-8-8 3.582-8 8 3.582 8 8 8zm0-2c3.314 0 6-2.686 6-6s-2.686-6-6-6-6 2.686-6 6 2.686 6 6 6zM9.414 40l5.95-5.95-1.414-1.414L8 38.586l-5.95-5.95L.636 34.05 6.586 40l-5.95 5.95 1.414 1.414L8 41.414l5.95 5.95 1.414-1.414L9.414 40z' fill='%2328a745' fill-opacity='0.4' fill-rule='evenodd'/%3E%3C/svg%3E");
    font-family: 'Balsamiq Sans', cursive;
}

.box {
    width: 85px;
    height: 85px;
    box-shadow: 0 .5rem 1rem rgba(0, 0, 0, .15) !important;
    border-radius: 20px !important;
    margin: 10px;
    padding: 21px;
    text-align: center;
}

.x-text {
    font-size: 80px;
    font-weight: bold;
    color: green;
    transform: translate(-6px, -25px);
    pointer-events: none;
}

.o-text {
    font-size: 80px;
    font-weight: bold;
    color: blue;
    transform: translate(-10px, -27px);
    pointer-events: none;
}

.winner-text {
    font-weight: bold;
    font-size: 20px;
    text-align: center;
}

.unselectable {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

.cn {
    margin-top: 30px;
    display: flex;
    justify-content: center;
    align-items: center;
    margin-bottom: 30px;
    min-width: 332px;
    min-height: 426px;
}

.inner {
    background-color: white;
    padding: 30px;
}

footer {
    background-color: #121212;
    text-align: center;
    padding-top: 10px;
    font-size: 16px;
    padding-bottom: 10px;
}

footer a {
    color: #3fa757;
}

.text-black {
    color: #121212 !important;
}

@media screen and (max-width: 769px) {
    .show-mobile {
        display: block;
    }

    .hide-mobile {
        display: none;
    }
}

@media screen and (min-width: 770px) {
    .show-mobile {
        display: none;
    }

    .hide-mobile {
        display: block;
    }
}

.font-game {
    font-family: 'Press Start 2P', cursive;
    font-size: 30px !important;
}
    </style>
</head>
<body>
    <div class="controls">
        <button id="toggle-mode">Play 2 Player Mode</button>
    </div>

    <div>
        <div class="board">
            <!-- Your Tic-Tac-Toe grid -->
        </div>
        <div class="status">
            <p id="game-status">Player X's turn</p>
        </div>
    </div>

    <script>
        const cells = document.querySelectorAll('.cell');
        const statusText = document.getElementById('game-status');
        const toggleModeBtn = document.getElementById('toggle-mode');

        let currentPlayer = 'X';
        let gameActive = true;
        let board = ['', '', '', '', '', '', '', '', ''];
        let gameMode = 0; // 0 = 2 Player, 1 = Random AI, 2 = Smart AI (Minimax)
        let firstTurnTaken = false;

        const winningConditions = [
            [0, 1, 2],
            [3, 4, 5],
            [6, 7, 8],
            [0, 3, 6],
            [1, 4, 7],
            [2, 5, 8],
            [0, 4, 8],
            [2, 4, 6]
        ];

        function checkForWinner() {
            /* Your existing checkForWinner logic */
        }

        function cellClick(event) {
            const clickedCell = event.target;
            const clickedCellIndex = clickedCell.getAttribute('data-index');

            if (board[clickedCellIndex] !== '' || !gameActive || (gameMode > 0 && currentPlayer === 'O')) {
                return;
            }

            // Disable mode button after first move
            if (!firstTurnTaken) {
                toggleModeBtn.disabled = true;
                firstTurnTaken = true;
            }

            board[clickedCellIndex] = currentPlayer;
            clickedCell.innerHTML = currentPlayer;

            if (!checkForWinner()) {
                currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
                statusText.innerHTML = `Player ${currentPlayer === 'X' ? 'X' : 'O'}'s turn`;

                if (gameMode > 0 && currentPlayer === 'O') {
                    setTimeout(() => {
                        if (gameMode === 1) {
                            playRandomMove();
                        } else if (gameMode === 2) {
                            playSmartMove();
                        }
                    }, 500);
                }
            }
        }

        function playRandomMove() {
            let availableCells = board.map((cell, index) => cell === '' ? index : null).filter(index => index !== null);
            if (availableCells.length > 0) {
                const randomIndex = Math.floor(Math.random() * availableCells.length);
                const cellIndex = availableCells[randomIndex];

                board[cellIndex] = 'O';
                cells[cellIndex].innerHTML = 'O';

                if (!checkForWinner()) {
                    currentPlayer = 'X';
                    statusText.innerHTML = `Player X's turn`;
                }
            }
        }

        // Smart AI move using Minimax
        function playSmartMove() {
            let bestMove = getBestMove(board);
            board[bestMove.index] = 'O';
            cells[bestMove.index].innerHTML = 'O';

            if (!checkForWinner()) {
                currentPlayer = 'X';
                statusText.innerHTML = `Player X's turn`;
            }
        }

        function getBestMove(board) {
            // Minimax algorithm implementation
            let bestScore = -Infinity;
            let move;
            for (let i = 0; i < board.length; i++) {
                if (board[i] === '') {
                    board[i] = 'O';
                    let score = minimax(board, 0, false);
                    board[i] = '';
                    if (score > bestScore) {
                        bestScore = score;
                        move = { index: i };
                    }
                }
            }
            return move;
        }

        function minimax(newBoard, depth, isMaximizing) {
            const scores = { X: -10, O: 10, tie: 0 };

            let result = checkForWinner(newBoard);
            if (result !== null) {
                return scores[result];
            }

            if (isMaximizing) {
                let bestScore = -Infinity;
                for (let i = 0; i < newBoard.length; i++) {
                    if (newBoard[i] === '') {
                        newBoard[i] = 'O';
                        let score = minimax(newBoard, depth + 1, false);
                        newBoard[i] = '';
                        bestScore = Math.max(score, bestScore);
                    }
                }
                return bestScore;
            } else {
                let bestScore = Infinity;
                for (let i = 0; i < newBoard.length; i++) {
                    if (newBoard[i] === '') {
                        newBoard[i] = 'X';
                        let score = minimax(newBoard, depth + 1, true);
                        newBoard[i] = '';
                        bestScore = Math.min(score, bestScore);
                    }
                }
                return bestScore;
            }
        }

        function resetBoard() {
            board = ['', '', '', '', '', '', '', '', ''];
            cells.forEach(cell => (cell.innerHTML = ''));
            currentPlayer = 'X';
            gameActive = true;
            firstTurnTaken = false;
            statusText.innerHTML = `Player X's turn`;
            toggleModeBtn.disabled = false;
        }

        function toggleMode() {
            gameMode = (gameMode + 1) % 3;
            const modeText = gameMode === 0 ? 'Play 2 Player Mode' : gameMode === 1 ? 'Play against Random AI' : 'Play against Smart AI';
            toggleModeBtn.innerHTML = modeText;
            resetBoard();
        }

        cells.forEach(cell => cell.addEventListener('click', cellClick));
        toggleModeBtn.addEventListener('click', toggleMode);
    </script>
</body>
</html>
